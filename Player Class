/* Player Class
 * Created by Saad Butt
 * Last Updated 2025/01/20
 * To create a Player Class 
 */

import javax.imageio.*;
import javax.swing.*;

public class Player
{
  //Attributes
  Card [] hand = new Card [7]; //Hand of seven cards 
  
  //Default Constructor
  public Player()
  {
    super();
  }
  
  //Get 7 random cards
  public Card dealCards()
  {
    int suitNum;
    int rankNum;
    char suit = 'o';
    Card currentCard = new Card();
    
    for(int x = 0; x < 8; x++)
    {
      rankNum = (int)(Math.random()*13+1); //Get a rank from 1 to 13
      suitNum = (int)(Math.random()*4+1);  //Get a suit from 1 to 4
      
      switch (suitNum)
      {
        case 1:
          suit = 'S';
          break;
        case 2:
          suit = 'H';
          break;
        case 3:
          suit = 'C';
          break;
        case 4:
          suit = 'D';
          break;  
      }
      if(x<7)
      {
        this.hand[x] = new Card();
        this.hand[x].setCard(rankNum, suit);
      }
      else
      {
        currentCard.setCard(rankNum, suit);
      }
    }
    
    return currentCard;
  }
  
  public Card placeCard(boolean [] cardSelected)
  {
    Card currentCard = new Card();
    
    for(int x = 0; x < 7; x++)
    {
      if(cardSelected[x])
      {
        currentCard.setCard(this.hand[x].getRank(), this.hand[x].getSuit());
        this.hand[x].useCard();
      }
    }
    return(currentCard);
  }
  
  
  /*Checks to see if a card can be played
   * If can be played return true otherwise false 
   * Param: cardSelected; the players choice of the cards they want to play, currentCard; the currend card 
   */
  public boolean ifCanplaceCard(boolean [] cardSelected, Card currentCard)
  {
    int cardsSelected = 0;
    int rank = 0;
    int rankMatches = 0;
    boolean sameRankorSuit = false;
    
    for(int x = 0; x < 7; x++)
    {
      if(cardSelected[x])
      {
        cardsSelected++;
      }
    }
    
    if (cardsSelected == 1)
    {
      for(int x = 0; x < 7; x++)
      {
        if(cardSelected[x])
        {
          if(this.hand[x].getRank() == currentCard.getRank() || this.hand[x].getSuit() == currentCard.getSuit())
          {
            return true;
          }
        }
      }
    }
    
    else
    {
      for(int x = 0; x < 7; x++)
      {
        if(cardSelected[x])
        {
          if(this.hand[x].getRank() == currentCard.getRank() || this.hand[x].getSuit() == currentCard.getSuit())
          {
            sameRankorSuit = true; 
          }
          if(rank == 0)
          {
            rank = this.hand[x].getRank();
            rankMatches++;
          }
          else 
          {
            if(rank == this.hand[x].getRank())
            {
              rankMatches++;
              if(cardsSelected == rankMatches && sameRankorSuit == true)
              {
                return true;
                
              }
            }
          }
        }
      }
    }
    return false;
  }
  
  /* Get the image associated with the Card
   * Returns the ImageIcon of the Card
   * Param: cardNumber; the number of card in the players hand
   */ 
  public ImageIcon getImage(int cardNumber)
  {
    return this.hand[cardNumber].getImage();
  }
  
  /* Check if there is a Card in the specific hand
   * Returns true of there is Card, otherwise false
   * Param: cardNumber; the number of card in the players hand
   */ 
  public boolean isThereACard(int cardNumber)
  {
    return this.hand[cardNumber].isThereACard();
  }
  
  /* Gives the player, 1 new randomly picked cards
   * If deck is full, replace last card
   */ 
  public void drawCard()
  {
    int suitNum;
    int rankNum;
    char suit = 'o';
    boolean cardPlaced = true;
    rankNum = (int)(Math.random()*13+1);
    suitNum = (int)(Math.random()*4+1);
    
    switch (suitNum)
    {
      case 1:
        suit = 'S';
        break;
      case 2:
        suit = 'H';
        break;
      case 3:
        suit = 'C';
        break;
      case 4:
        suit = 'D';
        break;  
    }
    
    for(int x = 0; x < 7; x++)
    {
      if (!this.hand[x].isThereACard())
      {
        this.hand[x].setCard(rankNum, suit);
        x = 7;
        cardPlaced = false;
      }
    }
    if(cardPlaced)
    {
      this.hand[6].setCard(rankNum, suit);
    }
  }
  
  /* Check if there is a Card in the players hand
   * Returns true of there is not a single Card in hand, otherwise false
   */ 
  public boolean isHandEmpty()
  {
    for(int x = 0; x < 7; x++)
    {
      if(this.hand[x].isThereACard())
      {
        return false; 
      }
    }
    return true;
  }
}
