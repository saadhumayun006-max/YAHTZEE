/* Crazy Eight Game View
 * Created by Saad Butt
 * Last Updated 2025/01/12
 * To create a view for the Crazy Eight Game
 */

import javax.imageio.*;
import javax.swing.*;
import java.awt.*;

public class CrazyEightView extends JPanel
{
  //Instance Variables
  CrazyEightGame model;                               //The model
  BorderLayout mainLayout = new BorderLayout();        //Borderlayout for the entire JPanel
  BoxLayout startLayout;
  GridLayout statsLayout = new GridLayout(3,1 ,0 ,10);           //Gridlayout for the stats
  GridLayout optionsLayout = new GridLayout(2,1 ,0 ,10);          //Gridlayout for the options 
  GridLayout compCardsLayout = new GridLayout(1 ,7 , 10 ,0);              //Gridlayout for the computer cards
  GridLayout playerCardsLayout = new GridLayout(1 ,7 , 5 ,0);           //Gridlayout for the players cards
  GridLayout currentCardLayout = new GridLayout(1 ,2, -600, 0);          
  BorderLayout startBorderLayout = new BorderLayout();
  JPanel westMain = new JPanel();
  JPanel northMain = new JPanel(); 
  JPanel southMain = new JPanel();
  JPanel currentCard = new JPanel();
  JPanel starter = new JPanel();
  JPanel compCards = new JPanel();
  JPanel playerCards = new JPanel();
  JPanel options = new JPanel();
  JPanel stats = new JPanel();
  JPanel endScreen = new JPanel();
  JButton exitButton = new JButton("Exit");
  JButton replayButton = new JButton("Retry");
  JButton startButton = new JButton("Start");
  JButton confirmButton = new JButton("Confirm");
  JButton loadGame = new JButton("Load");
  JLabel playerScores = new JLabel("            0 - 0");
  JLabel movesTaken = new JLabel("       Moves: 0");
  JLabel winner = new JLabel();
  JLabel [] computerCardImage = new JLabel[16];
  JLabel deckImage = new JLabel();
  JLabel currentCardImage = new JLabel();
  JLabel playerCardImage1 = new JLabel();
  JLabel playerCardImage2 = new JLabel();;
  JLabel playerCardImage3 = new JLabel();;
  JLabel playerCardImage4 = new JLabel();;
  JLabel playerCardImage5 = new JLabel();;
  JLabel playerCardImage6 = new JLabel();;
  JLabel playerCardImage7 = new JLabel();;
  JLabel roundsLabel = new JLabel("      Enter the Rounds");
  JTextField roundsField = new JTextField(8);
  JTextField wildCardChange = new JTextField();
  ImageIcon [] cardImage = new ImageIcon[16];
  
  /* Constructor for the View
   */
  
  public CrazyEightView(CrazyEightGame model)
  {
    super();
    this.model = model;
    this.model.setView(this);
    this.layoutView();
    this.registerControllers();
    this.update();
  }
  
  private void layoutView()
  {
    
    startLayout = new BoxLayout(starter, BoxLayout.Y_AXIS);
    starter.setLayout(startLayout);
    
    starter.add(startButton);
    starter.add(roundsLabel);
    starter.add(roundsField);
    starter.add(loadGame);
    /*this.westMain.setLayout(startBorderLayout);
     this.westMain.add(starter, BorderLayout.EAST);
     */
    
    
    
    
    
    
    
    
    
    cardImage [14] = new ImageIcon("CardImages/backside.png");
    
    
    
    
    
    
    
    
    
    
    
     
  }
  
  private void registerControllers()
  {
    if(this.model.getGameDisplay() == 1)
    {
    CrazyEightButtonController buttonCntrl = new CrazyEightButtonController(this.model, this.roundsField);
    this.startButton.addActionListener(buttonCntrl);
    this.confirmButton.addActionListener(buttonCntrl);
    this.replayButton.addActionListener(buttonCntrl);
    this.exitButton.addActionListener(buttonCntrl);
    }
    
    if(this.model.getGameDisplay() == 2)
    {
      CrazyEightCardController cardCntrl = new CrazyEightCardController(this.model);
      this.playerCardImage1.addMouseListener(cardCntrl);
      this.playerCardImage2.addMouseListener(cardCntrl);
      this.playerCardImage3.addMouseListener(cardCntrl);
      this.playerCardImage4.addMouseListener(cardCntrl);
      this.playerCardImage5.addMouseListener(cardCntrl);
      this.playerCardImage6.addMouseListener(cardCntrl);
      this.playerCardImage7.addMouseListener(cardCntrl);
      this.deckImage.addMouseListener(cardCntrl);
    }
  }
  
  public void update()
  {
    if (this.model.getGameDisplay() == 1)
    {
      this.starter.setVisible(true);
      this.northMain.setVisible(false);
      this.currentCard.setVisible(false);
      this.southMain.setVisible(false);
      this.add(starter);
      
    }
    else if (this.model.getGameDisplay() == 2)
    {
      this.starter.setVisible(false);
      this.northMain.setVisible(true);
      this.currentCard.setVisible(true);
      this.southMain.setVisible(true);
      this.add(currentCard, BorderLayout.CENTER);
    }
    else
    {
      this.starter.setVisible(false);
      this.northMain.setVisible(false);
      this.currentCard.setVisible(false);
      this.southMain.setVisible(false);
      this.endScreen.add(winner);
      this.add(endScreen);
      if(this.model.getGameDisplay() == 3)
      {
        this.winner.setText("You have Won Round: " + this.model.getRoundNumber());
      }
      else
      {
        this.winner.setText("Computer has Won Round: " + this.model.getRoundNumber());
      }
    }
    
    if (this.model.getGameDisplay() == 2)
    {
      this.removeAll();
      
      this.northMain = new JPanel(); 
      this.southMain = new JPanel();
      this.currentCard = new JPanel();
      this.compCards = new JPanel();
      this.options = new JPanel();
      this.playerCards = new JPanel(); 
      this.stats = new JPanel(); 
      
      this.compCards.setLayout(compCardsLayout);
      this.options.setLayout(optionsLayout);
      this.computerCardImage[0] = new JLabel(this.model.getComputerImage(0));
      this.computerCardImage[1] = new JLabel(this.model.getComputerImage(1));
      this.computerCardImage[2] = new JLabel(this.model.getComputerImage(2));
      this.computerCardImage[3] = new JLabel(this.model.getComputerImage(3));
      this.computerCardImage[4] = new JLabel(this.model.getComputerImage(4));
      this.computerCardImage[5] = new JLabel(this.model.getComputerImage(5));
      this.computerCardImage[6] = new JLabel(this.model.getComputerImage(6));
      this.compCards.add(computerCardImage[0]);
      this.compCards.add(computerCardImage[1]);
      this.compCards.add(computerCardImage[2]);
      this.compCards.add(computerCardImage[3]);
      this.compCards.add(computerCardImage[4]);
      this.compCards.add(computerCardImage[5]);
      this.compCards.add(computerCardImage[6]); 
      this.exitButton.setPreferredSize(new Dimension(100,40));
      this.options.add(exitButton);
      this.options.add(replayButton);
      this.northMain.add(compCards);
      this.northMain.add(options);
      
      
      this.deckImage = new JLabel(cardImage [14]);
      this.deckImage.setText("..");
      currentCardImage = new JLabel(this.model.getCurrentCardImage());
      this.currentCard.setLayout(currentCardLayout);
      this.currentCard.add(deckImage);
      this.currentCard.add(currentCardImage);
      
      
      this.playerCards.setLayout(playerCardsLayout);
      this.stats.setLayout(statsLayout);
      
      
      this.playerCardImage1 = new JLabel(this.model.getPlayerImage(0));
      this.playerCardImage1.setText("^");
      this.playerCards.add(playerCardImage1);
      
      
     
      this.playerCardImage2 = new JLabel(this.model.getPlayerImage(1));
      this.playerCardImage2.setText(".");
      this.playerCards.add(playerCardImage2);
      
      
      this.playerCardImage3 = new JLabel(this.model.getPlayerImage(2));
      this.playerCardImage3.setText(",");
      this.playerCards.add(playerCardImage3);
      
      this.playerCardImage4 = new JLabel(this.model.getPlayerImage(3));
      this.playerCardImage4.setText("*");
      this.playerCards.add(playerCardImage4);
      
      this.playerCardImage5 = new JLabel(this.model.getPlayerImage(4));
      this.playerCardImage5.setText("-");
      this.playerCards.add(playerCardImage5);
     
      this.playerCardImage6 = new JLabel(this.model.getPlayerImage(5));
      this.playerCardImage6.setText("'");
      this.playerCards.add(playerCardImage6);
      
      this.playerCardImage7 = new JLabel(this.model.getPlayerImage(6));
      this.playerCardImage7.setText("!");
      this.playerCards.add(playerCardImage7);
      
      
      this.confirmButton.setPreferredSize(new Dimension(100,40));
      this.stats.add(confirmButton);
      this.stats.add(playerScores);
      this.stats.add(movesTaken);
      
      this.southMain.add(playerCards);
      this.southMain.add(stats);
      this.setLayout(mainLayout);
      this.add(northMain, BorderLayout.NORTH);
      this.add(currentCard, BorderLayout.CENTER);
      this.add(southMain, BorderLayout.SOUTH);
      this.registerControllers();
      
    }
     
    
    
  }
}