/* Crazy Eight Game 
 * Created by Saad Butt
 * Last Updated 2025/01/12
 * To create the Crazy Eight Game
 */
import javax.imageio.*;
import javax.swing.*;
public class CrazyEightGame
{
  //Variable Decleration 
  private CrazyEightView gameView;
  int rounds;
  int gameDisplay;
  Card currentCard = new Card();
  boolean [] cardSelected = new boolean[7];
  Player player = new Player();
  Computer computer = new Computer();
  
  
  /* Default Constructor
   * Sets game display to 1 */
  public CrazyEightGame()
  {
    super();
    this.gameDisplay = 1;
  }
  
  /* Check if the game is done
   * Changes game display depending on who won
   */ 
  public void isGameDone()
  {
    if(this.player.isHandEmpty())
    {
      gameDisplay = 3;
      rounds--;
    }
    else if(this.computer.isHandEmpty())
    {
      gameDisplay = 4;
      rounds--;
    }
  }
  
  /*Reset the choice of the player
   * Sets the card selected array all to false*/ 
  private void resetCardSelected()
  {
    for(int x = 0; x < 7; x++)
    {
      cardSelected[x] = false;
    }
  }
  
  public void setView(CrazyEightView currentView)
  {
    this.gameView = currentView;
  }
  
  
  public void startGame(String roundNumber)
  {
    rounds = Integer.parseInt(roundNumber);
    this.gameDisplay = 2;
    currentCard = this.player.dealCards();
    this.computer.dealCards();
    this.updateView();
  }
  
  public void confirmMove()
  {
    if(this.player.ifCanplaceCard(cardSelected, currentCard))
    {
      this.currentCard = this.player.placeCard(cardSelected);
      this.currentCard = this.computer.playHand(currentCard);
      this.isGameDone();
      this.resetCardSelected();
      this.updateView();
    }
    else 
    {
      this.resetCardSelected();
      this.updateView();
    }
    
  }
  
  public void retry()
  {
    currentCard = this.player.dealCards();
    this.computer.dealCards();
    this.updateView();
  }
  
  public void exitGame()
  {
    this.gameDisplay = 1;
    this.updateView();
  }
  
  
  
  public void cardClicked(String card)
  {
    System.out.println(card);
    switch(card)
    {
      case"^": 
        cardSelected[0] = true;
        break;
      case".": 
        cardSelected[1] = true;
        break;
      case",": 
        cardSelected[2] = true;
        break;
      case"*": 
        cardSelected[3] = true;
        break;
      case"-": 
        cardSelected[4] = true;
        break;
      case"'": 
        cardSelected[5] = true;
        break;
      case"!": 
        cardSelected[6] = true;
        break;
      case"..": 
        this.player.drawCard();
        break;
    }
  }
  
  public int getRoundNumber()
  {
    return rounds;  
  }
  
  public int getGameDisplay()
  {
    return this.gameDisplay;
  }
  
  public ImageIcon getPlayerImage(int cardNumber)
  {
    return this.player.getImage(cardNumber);
  }
  
  public ImageIcon getComputerImage(int cardNumber)
  {
    return this.computer.getImage(cardNumber);
  }
  
  public ImageIcon getCurrentCardImage()
  {
    return this.currentCard.getImage();
  }
  
  public boolean isThereACard(int cardNumber)
  {
    return this.player.isThereACard(cardNumber);
  }
  
  public void updateView()
  {
    gameView.update();
  }
}